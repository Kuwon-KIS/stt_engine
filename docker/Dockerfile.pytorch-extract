FROM python:3.11-slim

WORKDIR /build

# PyTorch 및 패키지 설치
RUN pip install --upgrade pip && \
    pip install --no-cache-dir \
    torch==2.5.1 \
    torchaudio==2.5.1 \
    --index-url https://download.pytorch.org/whl/cu124

# 설치된 site-packages에서 wheels 찾기 및 복사
RUN mkdir -p /output && \
    find /usr/local/lib/python3.11/site-packages -name "*torch*" -type f | \
    head -20 && \
    pip show torch torchaudio | grep Location

CMD ["bash"]
